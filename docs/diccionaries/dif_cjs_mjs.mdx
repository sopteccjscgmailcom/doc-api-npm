# â™»ï¸ CJS vs EMS
ComparaciÃ³n detallada entre **CommonJS (CJS)** y **ECMAScript Modules (ESM)**

---

### ğŸ“¦ Â¿QuÃ© son?

| CaracterÃ­stica     | CommonJS (CJS)                         | ECMAScript Modules (ESM)                           |
| ------------------ | -------------------------------------- | -------------------------------------------------- |
| ğŸ“š DefiniciÃ³n      | Sistema de mÃ³dulos original de Node.js | Sistema oficial de mÃ³dulos de JavaScript desde ES6 |
| ğŸ“† AÃ±o de creaciÃ³n | 2009                                   | 2015 (ES6)                                         |
| ğŸ› ï¸ Uso principal  | Node.js (servidor)                     | Navegadores y Node.js moderno                      |

---

### ğŸ”„ Sintaxis de ImportaciÃ³n y ExportaciÃ³n

| AcciÃ³n      | CommonJS                                         | ESM                                                 |
| ----------- | ------------------------------------------------ | --------------------------------------------------- |
| ğŸ“¥ Importar | `const fs = require('fs')`                       | `import fs from 'fs'`                               |
| ğŸ“¤ Exportar | `module.exports = valor` o `exports.valor = ...` | `export default valor` o `export const valor = ...` |

---

### âš™ï¸ Carga de MÃ³dulos

| CaracterÃ­stica  | CommonJS                                                    | ESM                                                |
| --------------- | ----------------------------------------------------------- | -------------------------------------------------- |
| âŒ› Tipo de carga | **SincrÃ³nica** â€“ se carga en tiempo de ejecuciÃ³n            | **AsÃ­ncrona** â€“ se analiza antes de ejecutar       |
| ğŸš€ Performance  | MÃ¡s rÃ¡pido en Node.js clÃ¡sico, pero no Ã³ptimo para frontend | Mejor optimizado para navegadores modernos         |
| ğŸ” Caching      | Se cachea despuÃ©s de la primera carga                       | TambiÃ©n se cachea, pero tiene reglas mÃ¡s estrictas |

---

### ğŸ”„ Compatibilidad

| Aspecto                                        | CommonJS                                                                             | ESM                                                     |
| ---------------------------------------------- | ------------------------------------------------------------------------------------ | ------------------------------------------------------- |
| ğŸ”„ Compatibilidad mutua                        | ESM puede importar CJS (con limitaciones), pero CJS no puede importar ESM fÃ¡cilmente | Mejor interoperabilidad futura                          |
| ğŸŒ Navegadores                                 | âŒ No compatible nativamente                                                          | âœ… Compatible nativamente (con `<script type="module">`) |
| ğŸ§© Herramientas modernas (Vite, Webpack, etc.) | A veces requiere configuraciÃ³n adicional                                             | Preferido y soportado nativamente                       |

---

### ğŸ“ Archivos y Extensiones

| Aspecto         | CommonJS                  | ESM                                                     |
| --------------- | ------------------------- | ------------------------------------------------------- |
| ğŸ§¾ ExtensiÃ³n    | `.js` por defecto         | `.mjs` o `.js` (con `"type": "module"` en package.json) |
| ğŸ“¦ Package.json | No requiere configuraciÃ³n | Requiere `"type": "module"` para usar `.js` como ESM    |

---

### ğŸ” Scope

| Tema              | CommonJS                                  | ESM                                                                  |
| ----------------- | ----------------------------------------- | -------------------------------------------------------------------- |
| ğŸ”’ Ãmbito (scope) | Todos los mÃ³dulos tienen su propio Ã¡mbito | Igual, pero ademÃ¡s es mÃ¡s estricto                                   |
| ğŸ“› Hoisting       | No soporta hoisting de `require`          | Las importaciones se **hoistean** (mueven al inicio automÃ¡ticamente) |

---

### ğŸ§ª Ejemplo comparativo

**CommonJS (`math.js`)**:

```js
// math.js
function sumar(a, b) {
  return a + b;
}
module.exports = { sumar };
```

```js
// main.js
const { sumar } = require('./math');
console.log(sumar(2, 3));
```

**ESM (`math.mjs`)**:

```js
// math.mjs
export function sumar(a, b) {
  return a + b;
}
```

```js
// main.mjs
import { sumar } from './math.mjs';
console.log(sumar(2, 3));
```

---

### âœ… Â¿CuÃ¡l deberÃ­as usar?

| Caso                                                                            | RecomendaciÃ³n                          |
| ------------------------------------------------------------------------------- | -------------------------------------- |
| ğŸ”§ Proyectos en Node.js antiguo o con librerÃ­as viejas                          | CommonJS                               |
| ğŸŒ Aplicaciones modernas, especialmente en frontend o con herramientas modernas | **ESM** (preferido a futuro)           |
| ğŸ§ª LibrerÃ­as nuevas que apunten a navegadores y Node.js modernos                | **ESM** (es el estÃ¡ndar oficial ahora) |

---

Â¿Quieres que te muestre cÃ³mo convertir un mÃ³dulo de CommonJS a ESM con un ejemplo real? ğŸ˜Š
