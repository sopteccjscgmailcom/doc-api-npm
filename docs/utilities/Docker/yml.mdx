# Docker Compose con 3 contenedores de SQL Server

Â¡Perfecto! ğŸ˜ Vamos a ver cÃ³mo tener **varios contenedores de SQL Server** corriendo al mismo tiempo, cada uno escuchando en un **puerto diferente de tu PC** ğŸ”ğŸ§±

---

## ğŸ¯ Objetivo

Correr mÃºltiples instancias de SQL Server en contenedores, por ejemplo:

| Contenedor      | Puerto externo (tu PC) | Puerto interno (Docker) | ContraseÃ±a      |
| --------------- | ---------------------- | ----------------------- | --------------- |
| `sqlserver2022` | `14333`                | `1433`                  | `Admin#2022`    |
| `sqlserver2019` | `14334`                | `1433`                  | `Admin#2019`    |
| `sqlserverdev`  | `14335`                | `1433`                  | `Dev#Password1` |

---

## ğŸ“„ `docker-compose.yml` con 3 contenedores SQL Server

```yaml
version: '3.8'

services:
  sqlserver2022:
    image: mcr.microsoft.com/mssql/server:2022-latest
    container_name: sqlserver2022
    ports:
      - "14333:1433"
    environment:
      SA_PASSWORD: "Admin#2022"
      ACCEPT_EULA: "Y"
    volumes:
      - sql_data_2022:/var/opt/mssql
    restart: unless-stopped

  sqlserver2019:
    image: mcr.microsoft.com/mssql/server:2019-latest
    container_name: sqlserver2019
    ports:
      - "14334:1433"
    environment:
      SA_PASSWORD: "Admin#2019"
      ACCEPT_EULA: "Y"
    volumes:
      - sql_data_2019:/var/opt/mssql
    restart: unless-stopped

  sqlserverdev:
    image: mcr.microsoft.com/mssql/server:2022-latest
    container_name: sqlserverdev
    ports:
      - "14335:1433"
    environment:
      SA_PASSWORD: "Dev#Password1"
      ACCEPT_EULA: "Y"
    volumes:
      - sql_data_dev:/var/opt/mssql
    restart: unless-stopped

volumes:
  sql_data_2022:
  sql_data_2019:
  sql_data_dev:
  
```

---

## ğŸ§ª Â¿CÃ³mo conectarse?

| Desde Azure Data Studio o `sqlcmd` | Usuario | ContraseÃ±a      |
| ---------------------------------- | ------- | --------------- |
| `localhost,14333`                  | `sa`    | `Admin#2022`    |
| `localhost,14334`                  | `sa`    | `Admin#2019`    |
| `localhost,14335`                  | `sa`    | `Dev#Password1` |

---

## â–¶ï¸ CÃ³mo levantar todo

Guarda el `docker-compose.yml` en una carpeta y luego:

```bash
docker-compose up -d
```

La opciÃ³n `-d` viene de **"detached"** ğŸ§·, y significa:

> ğŸ§  **Ejecuta los contenedores en segundo plano** (modo background), **sin bloquear tu terminal**.

---

### ğŸ” ComparaciÃ³n:

| Comando                | Â¿Bloquea la terminal? | Â¿Muestra logs? | Â¿Corre contenedores? |
| ---------------------- | --------------------- | -------------- | -------------------- |
| `docker-compose up`    | âœ… SÃ­                  | âœ… SÃ­           | âœ… SÃ­                 |
| `docker-compose up -d` | âŒ No                  | âŒ No           | âœ… SÃ­                 |

---

### ğŸ§ª Ejemplo:

```bash
docker-compose up -d
```

âœ… Levanta tus contenedores
âœ… Te devuelve el control de la terminal
â›” No ves los logs directamente

---

### ğŸ“œ Ver los logs despuÃ©s

Si querÃ©s ver los logs aunque lo hayas levantado en modo `-d`, usÃ¡s:

```bash
docker-compose logs -f
```

(`-f` es como "seguir", para ver en tiempo real como si fuera `tail -f`)

---

## ğŸ§¹ CÃ³mo parar o borrar

* **Parar** (sin borrar datos):

```bash
docker-compose down
```

* **Borrar con volÃºmenes (borra todo el contenido tambiÃ©n):**

```bash
docker-compose down -v
```